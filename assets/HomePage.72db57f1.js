import{u as oe,o as te,a as ne,b as le,c as se,d as ie,e as re,Q as M,f as T,L as ue,g as ce,h as de,M as ve,D as me,i as fe,j as he,k as _e}from"./MainLayout.92196bb8.js";import{Q as ye}from"./QImg.6566708a.js";import{i as pe,j as be,h as R}from"./QBtn.b760948e.js";import{u as z,a as H,D as ke}from"./DialogComponent.a3b3a828.js";import{c as O,a as ge,h as we}from"./render.93ff94c4.js";import{m as u,j as d,i as w,n as K,A as Q,a5 as $,a6 as xe,_ as Ce,d as qe,M as De,o as r,c as L,w as W,e as P,b as f,$ as Se,I as Ie,q as k,g as A,f as v,z as U,G as j,Z as D,H as Ve,u as Pe,p as Ee,h as Be}from"./index.897f6306.js";import"./LoginCredential.c897c66b.js";const Fe=u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Te=O({name:"QRadio",props:{...z,...pe,...oe,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:_,emit:a}){const{proxy:y}=K(),c=H(e,y.$q),C=be(e,te),h=d(null),{refocusTargetEl:m,refocusTarget:p}=ne(e,h),n=w(()=>$(e.modelValue)===$(e.val)),o=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(c.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),b=w(()=>{const t=e.color!==void 0&&(e.keepColor===!0||n.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${n.value===!0?"truthy":"falsy"}${t}`}),g=w(()=>(n.value===!0?e.checkedIcon:e.uncheckedIcon)||null),q=w(()=>e.disable===!0?-1:e.tabindex||0),I=w(()=>{const t={type:"radio"};return e.name!==void 0&&Object.assign(t,{".checked":n.value===!0,"^checked":n.value===!0?"checked":void 0,name:e.name,value:e.val}),t}),V=le(I);function x(t){t!==void 0&&(Q(t),p(t)),e.disable!==!0&&n.value!==!0&&a("update:modelValue",e.val,t)}function E(t){(t.keyCode===13||t.keyCode===32)&&Q(t)}function N(t){(t.keyCode===13||t.keyCode===32)&&x(t)}return Object.assign(y,{set:x}),()=>{const t=g.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(R,{class:"q-radio__icon",name:g.value})])]:[Fe];e.disable!==!0&&V(t,"unshift"," q-radio__native q-ma-none q-pa-none");const B=[u("div",{class:b.value,style:C.value,"aria-hidden":"true"},t)];m.value!==null&&B.push(m.value);const F=e.label!==void 0?ge(_.default,[e.label]):we(_.default);return F!==void 0&&B.push(u("div",{class:"q-radio__label q-anchor--skip"},F)),u("div",{ref:h,class:o.value,tabindex:q.value,role:"radio","aria-label":e.label,"aria-checked":n.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:E,onKeyup:N},B)}}});const We=u("div",{key:"svg",class:"q-checkbox__bg absolute"},[u("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[u("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),u("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ue=O({name:"QCheckbox",props:se,emits:ie,setup(e){function _(a,y){const c=w(()=>(a.value===!0?e.checkedIcon:y.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>c.value!==null?[u("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[u(R,{class:"q-checkbox__icon",name:c.value})])]:[We]}return re("checkbox",_)}});const G={radio:Te,checkbox:Ue,toggle:M},je=Object.keys(G);var Ae=O({name:"QOptionGroup",props:{...z,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(_=>"value"in _&&"label"in _)},name:String,type:{default:"radio",validator:e=>je.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:_,slots:a}){const{proxy:{$q:y}}=K(),c=Array.isArray(e.modelValue);e.type==="radio"?c===!0&&console.error("q-option-group: model should not be array"):c===!1&&console.error("q-option-group: model should be array in your case");const C=H(e,y),h=w(()=>G[e.type]),m=w(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),p=w(()=>{const o={role:"group"};return e.type==="radio"&&(o.role="radiogroup",e.disable===!0&&(o["aria-disabled"]="true")),o});function n(o){_("update:modelValue",o)}return()=>u("div",{class:m.value,...p.value},e.options.map((o,b)=>{const g=a["label-"+b]!==void 0?()=>a["label-"+b](o):a.label!==void 0?()=>a.label(o):void 0;return u("div",[u(h.value,{modelValue:e.modelValue,val:o.value,name:o.name===void 0?e.name:o.name,disable:e.disable||o.disable,label:g===void 0?o.label:null,leftLabel:o.leftLabel===void 0?e.leftLabel:o.leftLabel,color:o.color===void 0?e.color:o.color,checkedIcon:o.checkedIcon,uncheckedIcon:o.uncheckedIcon,dark:o.dark||C.value,size:o.size===void 0?e.size:o.size,dense:e.dense,keepColor:o.keepColor===void 0?e.keepColor:o.keepColor,"onUpdate:modelValue":n},g)])}))}}),Ne="/paddy-app/assets/clyde_fly.c76c94b0.webp";const Le=xe("setup",{state:()=>({daemon:void 0,id:void 0,wpaType:void 0,ssid:"",pass:"",eUsername:"",ePassword:"",jwt:""}),getters:{isWifiEnterprise(){return this.wpaType=="E"},isComplete(){const e=!!this.daemon&&!!this.id&&!!this.wpaType,_=!!this.ssid&&!!this.pass,a=!!this.ssid&&!!this.ePassword&&!!this.eUsername;return e&&(_||a)},getOptions(e){return e}},actions:{}});const S=e=>(Ee("data-v-543eb1be"),e=e(),Be(),e),Oe=["onClick"],Qe={key:2,style:{height:"100%"},class:"column items-center"},$e=S(()=>v("h4",null,"No daemons here.",-1)),Me=S(()=>v("p",null,"Why don't you get some?",-1)),Re=[$e,Me],ze={key:0,class:"column items-center"},He=S(()=>v("p",null,[v("b",null,"Your Daemon has been successfully configured! Enjoy.")],-1)),Ke=S(()=>v("p",null,"Please allow a couple of minutes for the Daemon to calibrate itself and connect to your Wi-Fi network.",-1)),Ge={key:1},Ye=S(()=>v("br",null,null,-1)),Je={key:2},Ze=S(()=>v("p",null,[v("b",null,`If you don't know which one to choose, choose "Personal".`),v("br"),A(" Enterprise access points are often common in places like offices or schools, and require a username and a password. ")],-1)),Xe={class:"row justify-center"},ea={key:3,class:"column justify-center items-center"},aa=S(()=>v("label",null,"Wifi SSID:",-1)),oa={key:0},ta={key:2},na={key:4},la={key:4},sa=S(()=>v("p",null,[v("b",null,"You are almost ready to set up your new Daemon."),v("br"),v("br"),A(' Once you click "Finish", your daemon will be automatically configured. ')],-1)),ia=[sa],ra={key:5},ua=qe({__name:"HomePage",setup(e){const _=Pe(),a=Le(),y=d(void 0),c=d(!1),C=d(!1),h=d(void 0),m=d(void 0),p=d(void 0),n=d(void 0),o=d([]),b=d(),g=d("P"),q=d(""),I=d(""),V=d(""),x=d(""),E=d(!1);De(async()=>await t());const N=async l=>{await T.toggle(l),await t()},t=async(l=void 0)=>{y.value=await T.getAllUserDaemons(),l&&l()},B=l=>_.push(`daemon/${l}`),F=()=>{a.$reset(),g.value="P",q.value="",I.value="",V.value="",x.value="",E.value=!1,C.value=!1,m.value="Add New Daemon",h.value="auto_fix_high",p.value="cancel",o.value=["next"],n.value=void 0,b.value=Y,c.value=!0},Y=async()=>{let l;try{l=await fe()}catch(s){m.value="Cannot Add New Daemon",h.value="error_outline",n.value=s,o.value=[],p.value="OK",c.value=!0;return}if(a.daemon=l.daemon,a.id=l.id,!a.daemon||!a.id){m.value="Failed to add Daemon",h.value="error_outline",n.value="Daemon provided incorrect characteristics.",c.value=!0;return}m.value="Choose Wi-Fi Type",h.value="wifi",b.value=J},J=async()=>{a.wpaType=g.value,m.value="Input Wi-Fi Credentials",b.value=Z},Z=async()=>{const l=q.value&&I.value,s=q.value&&x.value&&V.value;!l&&!s||(a.ssid=q.value,a.pass=I.value,a.eUsername=V.value,a.ePassword=x.value,m.value="Finish Setup",h.value="auto_fix_high",o.value=["finish"],C.value=!0,b.value=X)},X=async()=>{var s;const l=await T.createDaemon(a.id);if(!l){m.value="Failed to add Daemon",h.value="error_outline",n.value=`We were unable to contact our servers.
        Please check your network connection and try again. Server Response: ${l}`,o.value=[],p.value="OK",c.value=!0;return}if(!l){m.value="Failed to add Daemon",h.value="error_outline",n.value=`We were unable to contact our servers.
        Please check your network connection and try again. Server Response: ${l}`,o.value=[],p.value="OK",c.value=!0;return}a.jwt=l.jwt;try{await he(a),await _e((s=a.daemon)==null?void 0:s.deviceId)}catch{m.value="Failed to add Daemon",h.value="error_outline",n.value="Daemon failed to be configured over BLE. Please reset it and retry.",o.value=[],p.value="OK",c.value=!0;return}a.$reset(),E.value=!0,o.value=[],p.value="OK",C.value=!1,y.value=await T.getAllUserDaemons()},ee=[{title:"Add / Recover Daemon",caption:"Add a new daemon to your list, or recover an existing one",icon:"add_circle_outline",action:F}];return(l,s)=>(r(),L(ve,{"action-links":ee},{default:W(()=>[y.value?y.value.length?(r(),L(ce,{key:1,class:"column",id:"container"},{default:W(()=>[P(de,{id:"scroll-container",onRefresh:t,color:"ghostwhite",icon:"autorenew"},{default:W(()=>[(r(!0),f(Ie,null,Se(y.value,i=>(r(),f("div",{class:"daemon-container wrap",key:i.id,onClick:ae=>B(i.id)},[P(me,{dense:!1,daemon:i},null,8,["daemon"]),P(M,{"model-value":i.on,icon:"bolt",size:"5rem",onClick:ae=>N(i.id)},null,8,["model-value","onClick"])],8,Oe))),128))]),_:1})]),_:1})):(r(),f("div",Qe,Re)):(r(),L(ue,{key:0})),P(ke,{modelValue:c.value,"onUpdate:modelValue":s[5]||(s[5]=i=>c.value=i),icon:h.value,persistent:C.value,title:m.value,"close-button":p.value,buttons:o.value,onNext:b.value,onFinish:b.value},{default:W(()=>[E.value?(r(),f("div",ze,[He,P(ye,{src:Ne}),Ke])):(!k(a).daemon||!k(a).id)&&!n.value?(r(),f("p",Ge,[A(" Hey, are you ready to setup your new Daemon? "),Ye,A(' Just press "Next" to get started! ')])):!k(a).wpaType&&!n.value?(r(),f("div",Je,[Ze,v("div",Xe,[P(Ae,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),options:[{label:"Personal",value:"P"},{label:"Enterprise",value:"E"}],color:"primary",inline:""},null,8,["modelValue"])])])):!k(a).ssid&&!n.value?(r(),f("div",ea,[aa,U(v("input",{class:"input-form",type:"text","onUpdate:modelValue":s[1]||(s[1]=i=>q.value=i)},null,512),[[j,q.value]]),k(a).isWifiEnterprise?D("",!0):(r(),f("label",oa,"Wifi Password:")),k(a).isWifiEnterprise?D("",!0):U((r(),f("input",{key:1,class:"input-form",type:"password","onUpdate:modelValue":s[2]||(s[2]=i=>I.value=i)},null,512)),[[j,I.value]]),k(a).isWifiEnterprise?(r(),f("label",ta,"Enterprise Username:")):D("",!0),k(a).isWifiEnterprise?U((r(),f("input",{key:3,class:"input-form","onUpdate:modelValue":s[3]||(s[3]=i=>V.value=i)},null,512)),[[j,V.value]]):D("",!0),k(a).isWifiEnterprise?(r(),f("label",na,"Enterprise Password:")):D("",!0),k(a).isWifiEnterprise?U((r(),f("input",{key:5,class:"input-form",type:"password","onUpdate:modelValue":s[4]||(s[4]=i=>x.value=i)},null,512)),[[j,x.value]]):D("",!0)])):k(a).isComplete&&!n.value?(r(),f("div",la,ia)):D("",!0),n.value?(r(),f("p",ra,Ve(n.value),1)):D("",!0)]),_:1},8,["modelValue","icon","persistent","title","close-button","buttons","onNext","onFinish"])]),_:1}))}});var ya=Ce(ua,[["__scopeId","data-v-543eb1be"]]);export{ya as default};
