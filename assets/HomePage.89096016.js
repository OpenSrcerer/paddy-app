import{u as oe,o as te,a as ne,b as le,c as se,d as ie,e as re,Q as M,f as T,L as ue,g as ce,h as de,M as ve,D as me,i as fe,j as _e,k as he}from"./MainLayout.88f53ac1.js";import{Q as ye}from"./QImg.89aa344b.js";import{i as pe,j as be,h as R}from"./QBtn.e04a3678.js";import{u as z,a as H,D as ke}from"./DialogComponent.67025d59.js";import{c as O,a as ge,h as we}from"./render.41c40bb0.js";import{m as u,j as v,i as w,n as K,A as Q,a5 as $,a6 as xe,_ as Ce,d as qe,M as De,o as r,c as L,w as W,e as P,b as f,$ as Se,I as Ie,q as k,g as A,f as c,z as U,G as j,Z as S,H as Ve,u as Pe,p as Ee,h as Be}from"./index.3eb12f26.js";import"./LoginCredential.c897c66b.js";const Fe=u("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[u("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),u("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Te=O({name:"QRadio",props:{...z,...pe,...oe,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:h,emit:a}){const{proxy:y}=K(),d=H(e,y.$q),q=be(e,te),_=v(null),{refocusTargetEl:m,refocusTarget:p}=ne(e,_),n=w(()=>$(e.modelValue)===$(e.val)),o=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(d.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),b=w(()=>{const t=e.color!==void 0&&(e.keepColor===!0||n.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${n.value===!0?"truthy":"falsy"}${t}`}),g=w(()=>(n.value===!0?e.checkedIcon:e.uncheckedIcon)||null),D=w(()=>e.disable===!0?-1:e.tabindex||0),I=w(()=>{const t={type:"radio"};return e.name!==void 0&&Object.assign(t,{".checked":n.value===!0,"^checked":n.value===!0?"checked":void 0,name:e.name,value:e.val}),t}),V=le(I);function x(t){t!==void 0&&(Q(t),p(t)),e.disable!==!0&&n.value!==!0&&a("update:modelValue",e.val,t)}function E(t){(t.keyCode===13||t.keyCode===32)&&Q(t)}function N(t){(t.keyCode===13||t.keyCode===32)&&x(t)}return Object.assign(y,{set:x}),()=>{const t=g.value!==null?[u("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[u(R,{class:"q-radio__icon",name:g.value})])]:[Fe];e.disable!==!0&&V(t,"unshift"," q-radio__native q-ma-none q-pa-none");const B=[u("div",{class:b.value,style:q.value,"aria-hidden":"true"},t)];m.value!==null&&B.push(m.value);const F=e.label!==void 0?ge(h.default,[e.label]):we(h.default);return F!==void 0&&B.push(u("div",{class:"q-radio__label q-anchor--skip"},F)),u("div",{ref:_,class:o.value,tabindex:D.value,role:"radio","aria-label":e.label,"aria-checked":n.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:x,onKeydown:E,onKeyup:N},B)}}});const We=u("div",{key:"svg",class:"q-checkbox__bg absolute"},[u("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[u("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),u("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ue=O({name:"QCheckbox",props:se,emits:ie,setup(e){function h(a,y){const d=w(()=>(a.value===!0?e.checkedIcon:y.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>d.value!==null?[u("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[u(R,{class:"q-checkbox__icon",name:d.value})])]:[We]}return re("checkbox",h)}});const G={radio:Te,checkbox:Ue,toggle:M},je=Object.keys(G);var Ae=O({name:"QOptionGroup",props:{...z,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(h=>"value"in h&&"label"in h)},name:String,type:{default:"radio",validator:e=>je.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:h,slots:a}){const{proxy:{$q:y}}=K(),d=Array.isArray(e.modelValue);e.type==="radio"?d===!0&&console.error("q-option-group: model should not be array"):d===!1&&console.error("q-option-group: model should be array in your case");const q=H(e,y),_=w(()=>G[e.type]),m=w(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),p=w(()=>{const o={role:"group"};return e.type==="radio"&&(o.role="radiogroup",e.disable===!0&&(o["aria-disabled"]="true")),o});function n(o){h("update:modelValue",o)}return()=>u("div",{class:m.value,...p.value},e.options.map((o,b)=>{const g=a["label-"+b]!==void 0?()=>a["label-"+b](o):a.label!==void 0?()=>a.label(o):void 0;return u("div",[u(_.value,{modelValue:e.modelValue,val:o.value,name:o.name===void 0?e.name:o.name,disable:e.disable||o.disable,label:g===void 0?o.label:null,leftLabel:o.leftLabel===void 0?e.leftLabel:o.leftLabel,color:o.color===void 0?e.color:o.color,checkedIcon:o.checkedIcon,uncheckedIcon:o.uncheckedIcon,dark:o.dark||q.value,size:o.size===void 0?e.size:o.size,dense:e.dense,keepColor:o.keepColor===void 0?e.keepColor:o.keepColor,"onUpdate:modelValue":n},g)])}))}}),Ne="/paddy-app/assets/clyde_fly.c76c94b0.webp";const Le=xe("setup",{state:()=>({daemon:void 0,id:void 0,wpaType:void 0,ssid:"",pass:"",eUsername:"",ePassword:"",jwt:""}),getters:{isWifiEnterprise(){return this.wpaType=="E"},isComplete(){const e=!!this.daemon&&!!this.id&&!!this.wpaType,h=!!this.ssid&&!!this.pass,a=!!this.ssid&&!!this.ePassword&&!!this.eUsername;return e&&(h||a)},getOptions(e){return e}},actions:{}});const C=e=>(Ee("data-v-0e852ff0"),e=e(),Be(),e),Oe=["onClick"],Qe=C(()=>c("br",null,null,-1)),$e={key:2,style:{height:"100%"},class:"column items-center"},Me=C(()=>c("h4",null,"No daemons here.",-1)),Re=C(()=>c("p",null,"Why don't you get some?",-1)),ze=[Me,Re],He={key:0,class:"column items-center"},Ke=C(()=>c("p",null,[c("b",null,"Your Daemon has been successfully configured! Enjoy.")],-1)),Ge=C(()=>c("p",null,"Please allow a couple of minutes for the Daemon to calibrate itself and connect to your Wi-Fi network.",-1)),Ye={key:1},Je=C(()=>c("br",null,null,-1)),Ze={key:2},Xe=C(()=>c("p",null,[c("b",null,`If you don't know which one to choose, choose "Personal".`),c("br"),A(" Enterprise access points are often common in places like offices or schools, and require a username and a password. ")],-1)),ea={class:"row justify-center"},aa={key:3,class:"column justify-center items-center"},oa=C(()=>c("label",null,"Wifi SSID:",-1)),ta={key:0},na={key:2},la={key:4},sa={key:4},ia=C(()=>c("p",null,[c("b",null,"You are almost ready to set up your new Daemon."),c("br"),c("br"),A(' Once you click "Finish", your daemon will be automatically configured. ')],-1)),ra=[ia],ua={key:5},ca=qe({__name:"HomePage",setup(e){const h=Pe(),a=Le(),y=v(void 0),d=v(!1),q=v(!1),_=v(void 0),m=v(void 0),p=v(void 0),n=v(void 0),o=v([]),b=v(),g=v("P"),D=v(""),I=v(""),V=v(""),x=v(""),E=v(!1);De(async()=>await t());const N=async l=>{await T.toggle(l),await t()},t=async(l=void 0)=>{y.value=await T.getAllUserDaemons(),l&&l()},B=l=>h.push(`daemon/${l}`),F=()=>{a.$reset(),g.value="P",D.value="",I.value="",V.value="",x.value="",E.value=!1,q.value=!1,m.value="Add New Daemon",_.value="auto_fix_high",p.value="cancel",o.value=["next"],n.value=void 0,b.value=Y,d.value=!0},Y=async()=>{let l;try{l=await fe()}catch(s){m.value="Cannot Add New Daemon",_.value="error_outline",n.value=s,o.value=[],p.value="OK",d.value=!0;return}if(a.daemon=l.daemon,a.id=l.id,!a.daemon||!a.id){m.value="Failed to add Daemon",_.value="error_outline",n.value="Daemon provided incorrect characteristics.",d.value=!0;return}m.value="Choose Wi-Fi Type",_.value="wifi",b.value=J},J=async()=>{a.wpaType=g.value,m.value="Input Wi-Fi Credentials",b.value=Z},Z=async()=>{const l=D.value&&I.value,s=D.value&&x.value&&V.value;!l&&!s||(a.ssid=D.value,a.pass=I.value,a.eUsername=V.value,a.ePassword=x.value,m.value="Finish Setup",_.value="auto_fix_high",o.value=["finish"],q.value=!0,b.value=X)},X=async()=>{var s;const l=await T.createDaemon(a.id);if(!l){m.value="Failed to add Daemon",_.value="error_outline",n.value=`We were unable to contact our servers.
        Please check your network connection and try again. Server Response: ${l}`,o.value=[],p.value="OK",d.value=!0;return}if(!l){m.value="Failed to add Daemon",_.value="error_outline",n.value=`We were unable to contact our servers.
        Please check your network connection and try again. Server Response: ${l}`,o.value=[],p.value="OK",d.value=!0;return}a.jwt=l.jwt;try{await _e(a),await he((s=a.daemon)==null?void 0:s.deviceId)}catch{m.value="Failed to add Daemon",_.value="error_outline",n.value="Daemon failed to be configured over BLE. Please reset it and retry.",o.value=[],p.value="OK",d.value=!0;return}a.$reset(),E.value=!0,o.value=[],p.value="OK",q.value=!1,y.value=await T.getAllUserDaemons()},ee=[{title:"Add / Recover Daemon",caption:"Add a new daemon to your list, or recover an existing one",icon:"add_circle_outline",action:F}];return(l,s)=>(r(),L(ve,{"action-links":ee},{default:W(()=>[y.value?y.value.length?(r(),L(ce,{key:1,class:"column",id:"container"},{default:W(()=>[P(de,{id:"scroll-container",onRefresh:t,color:"ghostwhite",icon:"autorenew"},{default:W(()=>[(r(!0),f(Ie,null,Se(y.value,i=>(r(),f("div",{class:"daemon-container wrap",key:i.id,onClick:ae=>B(i.id)},[P(me,{dense:!1,daemon:i},null,8,["daemon"]),P(M,{"model-value":i.on,icon:"bolt",size:"5rem",onClick:ae=>N(i.id)},null,8,["model-value","onClick"])],8,Oe))),128)),Qe]),_:1})]),_:1})):(r(),f("div",$e,ze)):(r(),L(ue,{key:0})),P(ke,{modelValue:d.value,"onUpdate:modelValue":s[5]||(s[5]=i=>d.value=i),icon:_.value,persistent:q.value,title:m.value,"close-button":p.value,buttons:o.value,onNext:b.value,onFinish:b.value},{default:W(()=>[E.value?(r(),f("div",He,[Ke,P(ye,{src:Ne}),Ge])):(!k(a).daemon||!k(a).id)&&!n.value?(r(),f("p",Ye,[A(" Hey, are you ready to setup your new Daemon? "),Je,A(' Just press "Next" to get started! ')])):!k(a).wpaType&&!n.value?(r(),f("div",Ze,[Xe,c("div",ea,[P(Ae,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=i=>g.value=i),options:[{label:"Personal",value:"P"},{label:"Enterprise",value:"E"}],color:"primary",inline:""},null,8,["modelValue"])])])):!k(a).ssid&&!n.value?(r(),f("div",aa,[oa,U(c("input",{class:"input-form",type:"text","onUpdate:modelValue":s[1]||(s[1]=i=>D.value=i)},null,512),[[j,D.value]]),k(a).isWifiEnterprise?S("",!0):(r(),f("label",ta,"Wifi Password:")),k(a).isWifiEnterprise?S("",!0):U((r(),f("input",{key:1,class:"input-form",type:"password","onUpdate:modelValue":s[2]||(s[2]=i=>I.value=i)},null,512)),[[j,I.value]]),k(a).isWifiEnterprise?(r(),f("label",na,"Enterprise Username:")):S("",!0),k(a).isWifiEnterprise?U((r(),f("input",{key:3,class:"input-form","onUpdate:modelValue":s[3]||(s[3]=i=>V.value=i)},null,512)),[[j,V.value]]):S("",!0),k(a).isWifiEnterprise?(r(),f("label",la,"Enterprise Password:")):S("",!0),k(a).isWifiEnterprise?U((r(),f("input",{key:5,class:"input-form",type:"password","onUpdate:modelValue":s[4]||(s[4]=i=>x.value=i)},null,512)),[[j,x.value]]):S("",!0)])):k(a).isComplete&&!n.value?(r(),f("div",sa,ra)):S("",!0),n.value?(r(),f("p",ua,Ve(n.value),1)):S("",!0)]),_:1},8,["modelValue","icon","persistent","title","close-button","buttons","onNext","onFinish"])]),_:1}))}});var pa=Ce(ca,[["__scopeId","data-v-0e852ff0"]]);export{pa as default};
